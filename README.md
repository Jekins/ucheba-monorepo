# Монорепозиторий фронтенда Учеба.ру

В данной монорепе собран весь фронтенд всех сервисов Учеба.ру.
Управление монорепой осуществляется с помощью [Lerna](https://lerna.js.org/).

## Установка глобальных зависимостей

Node.js (v12.18.1): https://nodejs.org/

Yarn (v1.22.4): `npm i -g yarn@1.22.4`

Lerna (v3.22.1): `npm i -g lerna@3.22.1`

PM2 (v4.4.0): `npm i -g pm2@4.4.0`

## Продакшен

Прод билд всех сервисов и запуск серверов для каждого.
Запуск из корня монорепы: `npm run start`

### Порты сервисов

Основной портал Учеба.ру (portal.web): `4000`

### Команды управления серверами

Посмотреть список и состояние запущеных серверов: `pm2 list`

Запустит мониторинг серверов: `pm2 monit`

Перезагрузить все сервера: `pm2 reload all`

Остановить и удалить все сервера: `pm2 delete all`

## Разработка

Команды выполнять в корне репозитория.

Установить все зависимости: `lerna bootstrap`

Добавление зависимости одновременно для всех сервисов: `lerna add react@16.13.1 --hoist`

Добавление зависимости конкретному сервису: `lerna add react@16.13.1 --scope=@ucheba/portal.web`

Запуск dev сервера для конкретного сервиса: `lerna exec next --scope=@ucheba/portal.web`
